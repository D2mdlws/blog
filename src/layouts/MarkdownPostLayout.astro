---
import BaseLayout from './BaseLayout.astro';
import Comments from '../components/Comments.astro';
const { frontmatter } = Astro.props;

const currentUrl = Astro.url.href;
---
<BaseLayout pageTitle={frontmatter.title}>
  <article>
    <!-- 文章头部信息 -->
    <header class="mb-10 text-center">
      <h1 class="text-3xl font-bold mb-4 font-sans text-gray-900">{frontmatter.title}</h1>
      <div class="flex justify-center gap-4 text-sm text-gray-500 font-sans">
        <p>{frontmatter.pubDate.toString().slice(0,10)}</p>
        <div class="flex gap-2">
          {frontmatter.tags.map((tag: string) => (
            <span class="bg-gray-100 px-2 py-0.5 rounded text-xs text-gray-600">#{tag}</span>
          ))}
        </div>
      </div>
    </header>

    <!-- 文章正文：prose-slate 设定灰度，prose-lg 增大字号利于阅读 -->
    <div class="prose prose-slate prose-lg max-w-none prose-headings:font-sans prose-a:text-blue-600 hover:prose-a:text-blue-400 prose-img:rounded-lg prose-img:shadow-sm">
      <slot />
    </div>

    <!-- ============================================ -->
    <!-- ============================================ -->
    <div class="mt-24 pt-8 border-t border-gray-200">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        
        <!-- 左侧：作者与协议 -->
        <div class="space-y-6">
          <div>
            <span class="block text-xs text-gray-400 font-sans font-bold tracking-widest uppercase mb-1">
              Author
            </span>
            <span class="font-serif text-lg text-gray-900 italic">
              mdlws
            </span>
          </div>
          <div>
            <span class="block text-xs text-gray-400 font-sans font-bold tracking-widest uppercase mb-1">
              License
            </span>
            <a 
              href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" 
              target="_blank" 
              rel="noopener noreferrer"
              class="font-serif text-gray-600 hover:text-black border-b border-gray-200 hover:border-black transition-all pb-0.5"
            >
              CC BY-NC-SA 4.0
            </a>
          </div>
        </div>

        <!-- 右侧：永久链接 -->
        <div>
          <span class="block text-xs text-gray-400 font-sans font-bold tracking-widest uppercase mb-1">
            Permalink
          </span>
          <a href={currentUrl} class="font-mono text-sm text-gray-500 hover:text-black break-all transition-colors">
            {currentUrl}
          </a>
          <p class="text-xs text-gray-300 mt-2 font-serif">
            转载请保留原文链接与作者署名。
          </p>
        </div>

      </div>
    </div>

  </article>

  <Comments />
</BaseLayout>